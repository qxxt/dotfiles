#!/bin/bash

if [ -e $1-cache ]; then
        if [[ $(diff $1 $1-cache) == "" ]]; then
                echo -e '\033[0;31mRUN CACHED BINARY\033[0m'
                ./$1-bin ${@:2}
        else
                go build -o $1-bin $1 && cp $1 $1-cache && ./$1-bin ${@:2}
        fi
else
        go build -o $1-bin $1 && cp $1 $1-cache && ./$1-bin ${@:2}
fi
